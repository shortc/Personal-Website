http:
  routers:
    traefik-secure:
      entryPoints:
        - https
      rule: "Host(`traefik.chrisshort.dev`)"
      service: api@internal
      middlewares:
        - dashboard-auth
      tls:
        certResolver: letsencrypt

    https-redirect:
      entryPoints:
        - http
      rule: "hostregexp(`{host:.+}`)"
      service: dummy
      middlewares:
        - redirect-to-https

  middlewares:
    dashboard-auth:
      basicAuth:
        users:
          - "admin:$2y$05$hkh2ZrrJm6KXL3Hz/8ALC.lJeYw9ldFwsW6dLqfvyHqJcERTB4yTq"

    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true

  services:
    dummy:
      loadBalancer:
        servers:
          - url: localhost
